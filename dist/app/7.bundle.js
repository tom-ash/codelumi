(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{221:function(e,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},r=function(e,n,a){return n&&o(e.prototype,n),a&&o(e,a),e};function o(e,n){for(var a=0;a<n.length;a++){var t=n[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}var i,s=a(0),l=(i=s)&&i.__esModule?i:{default:i},d=a(4),u=a(257),c=a(9),p=a(258),f=a(259),m=a(260),g=a(261),h=a(8),w=a(240),v=a(20);a(263);var b=(function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(y,l.default.Component),r(y,[{key:"render",value:function(){var e=this.props.editAccount;return l.default.createElement(l.default.Fragment,null,!e&&l.default.createElement(v.CloseButton,{classNames:"page narrow"}),l.default.createElement("div",{id:"user-edit-account-password",className:e?"":"container narrow-container shadowed",onClick:function(e){return e.stopPropagation()}},!e&&l.default.createElement("h2",{className:"page-header"},l.default.createElement("i",{className:"fas fa-user-plus"})," ",this.languageHandler("Resetowanie hasła","Password Resetting")),l.default.createElement("div",{className:"inputs"},l.default.createElement("div",{className:"monit"},this.monitProvider()),l.default.createElement(c.ManagedText,t({key:"emailAddress"},this.emailManager())),l.default.createElement(c.ManagedText,t({key:"verificationCode"},this.verificationManager())),l.default.createElement(c.ManagedText,t({key:"password"},this.passwordManager())),l.default.createElement(c.ManagedButton,t({key:"button"},this.buttonManager())))))}}]),y);function y(e){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,y);var n=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,e));return n.componentWillUnmount=p.componentWillUnmount.bind(n),n.emailManager=f.emailManager.bind(n),n.verificationManager=f.verificationManager.bind(n),n.passwordManager=f.passwordManager.bind(n),n.buttonManager=f.buttonManager.bind(n),n.sendEmail=m.sendEmail.bind(n),n.sendVerification=m.sendVerification.bind(n),n.sendPassword=m.sendPassword.bind(n),n.monitProvider=g.monitProvider.bind(n),n.languageHandler=h.languageHandler.bind(n),n.languageObjectHandler=h.languageObjectHandler.bind(n),n.labelProvider=w.labelProvider.bind(n),n}n.default=(0,d.connect)(u.mapStateToProps,u.mapDispatchToProps)(b)},236:function(e,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.inputs={businessName:{icon:"fas fa-ellipsis-h",label:{pl:"Nazwa (firma) Ogłoszeniodawcy",en:"Announcer Business Name"}},taxNumber:{icon:"fas fa-ellipsis-h",label:{pl:"Numer identifikacji podatkowej",en:"Tax Identification Number"}},phoneCode:{icon:"fas fa-phone",label:{pl:"ZZZ",en:"ZZZ"}},phone:{icon:"fas fa-phone",label:{pl:"Numer telefonu",en:"Phone number"}},email:{icon:"fas fa-envelope",label:{pl:"Adres email",en:"Email address"}},password:{icon:"fas fa-lock",label:{pl:"Hasło",en:"Password"}},verification:{icon:"fas fa-lock",label:{pl:"Kod weryfikacyjny",en:"Verification Code"}}}},237:function(e,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default={passwordHashing:{keySize:32,iterations:128},emailRegex:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,passwordRegex:/^\S{6,}$/,verificationCodeRegex:/^[a-zA-Z0-9]{8}$/}},238:function(e,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var n=e.connecting,a=e.label,t=e.languageObjectHandler;return n?r.default.createElement(o.default,{spinnerClass:"very-small-windmill-spinner"}):t(a)};var r=t(a(0)),o=t(a(47));function t(e){return e&&e.__esModule?e:{default:e}}},240:function(e,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.labelProvider=function(e,n){return o.default.createElement("span",null,o.default.createElement("i",{className:e}),o.default.createElement("span",{className:"text"},this.languageObjectHandler(n)))};var t,r=a(0),o=(t=r)&&t.__esModule?t:{default:t}},241:function(e,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.hashPassword=function(e,n){var a=i.default.passwordHashing,t=a.keySize,r=a.iterations;return(0,o.default)(e,n,{keySize:t,iterations:r}).toString()},n.emailAddressValidator=function(e,n,a){return!!i.default.emailRegex.test(e)||(this.props[n](a),!1)};var o=t(a(252)),i=t(a(237));function t(e){return e&&e.__esModule?e:{default:e}}},242:function(e,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.noError={pl:"",en:""}},244:function(e,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.emailValidator=function(e){var n=t.default.emailRegex.test(e),a=n?null:r.default.email;return{isValid:n,error:a}};var t=o(a(237)),r=o(a(250));function o(e){return e&&e.__esModule?e:{default:e}}},250:function(e,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default={email:{pl:"nieprawidłowy adres email",en:"invalid email address"}}},257:function(e,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.mapStateToProps=function(e){return{language:e.app.language,path:e.app.path,connecting:e.user.edit.control.passwordConnecting,stage:e.user.edit.control.passwordStage,step:e.user.edit.control.passwordStep,error:e.user.edit.errors.password}},n.mapDispatchToProps=function(n){return{changeControl:function(e){return n({type:"user/edit/control",value:e})},changeData:function(e){return n({type:"user/edit/data",value:e})},changeErrors:function(e){return n({type:"user/edit/errors",value:e})}}}},258:function(e,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.componentWillUnmount=function(){this.props.changeControl({passwordStep:null}),this.props.changeErrors({password:t.noError})};var t=a(242)},259:function(e,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.emailManager=function(){var n=this,e=u.inputs.email,a=e.label,t=e.icon,r=this.props,o=r.step,i=r.changeErrors,s=r.error;return{id:"user-edit-password-email",display:null===o?"block":"none",controlled:!1,classNames:{container:"form-input text"},label:this.languageObjectHandler(a),children:l.default.createElement("i",{className:t}),onChange:function(){return i({password:d.noError})},onBlur:function(e){return n.emailManager().validate(e)},validate:function(e){var n=(0,c.emailValidator)(e),a=n.isValid,t=n.error;a||i({password:t})},error:this.languageObjectHandler(s)}},n.verificationManager=function(){var n=this,e=this.props,a=e.step,t=e.changeErrors,r=u.inputs.verification,o=r.label,i=r.icon;return{id:"user-edit-password-verification",display:"verificationCode"===a?"block":"none",controlled:!1,classNames:{container:"form-input text"},label:this.languageObjectHandler(o),children:l.default.createElement("i",{className:i}),onChange:function(){return t({password:d.noError})},onBlur:function(e){return n.verificationManager().validate(e)},validate:function(e){return 8===e.length||(t({password:{pl:"nieprawidłowy kod weryfikacyjny",en:"invalid verification code"}}),!1)},error:this.languageObjectHandler(this.props.error)}},n.passwordManager=function(){var n=this,e=this.props,a=e.step,t=e.changeErrors,r=u.inputs.password,o=r.label,i=r.icon;return{id:"user-edit-password",display:"password"===a?"block":"none",controlled:!1,type:"password",autoComplete:"new-password",classNames:{container:"form-input text"},label:this.languageObjectHandler(o),children:l.default.createElement("i",{className:i}),onChange:function(){return t({password:d.noError})},onBlur:function(e){return n.passwordManager().validate(e)},validate:function(e){return 5<e.length||(t({password:{pl:"hasło musi mieć przynajmniej sześć znaków",en:"the password has to be at least six characters long"}}),!1)},error:this.languageObjectHandler(this.props.error)}},n.buttonManager=function(){var e=this.props,n=e.step,a=e.connecting;return{display:"success"===n?"none":"block",classNames:{container:"form-input button"},label:l.default.createElement(t.default,{connecting:a,label:function(){return"password"===this.props.step?{pl:"Zmień",en:"Change"}:{pl:"Dalej",en:"Next"}}.call(this),languageObjectHandler:this.languageObjectHandler}),onClick:function(){var r=this,e=this.props,n=e.connecting,a=e.step,o=e.changeErrors;if(n)return;switch(a){case null:return function(){var e=document.getElementById("user-edit-password-email").value,n=(0,c.emailValidator)(e),a=n.isValid,t=n.error;if(a)return r.sendEmail();o({password:t})};case"verificationCode":return this.sendVerification;case"password":return this.sendPassword}}.call(this)}};var l=r(a(0)),d=a(242),u=a(236),t=r(a(238)),c=a(244);function r(e){return e&&e.__esModule?e:{default:e}}},260:function(e,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.sendEmail=function(){var e=this.props,n=e.language,a=e.connecting,t=e.changeControl,r=e.changeErrors,o=document.getElementById("user-edit-password-email").value;if(a||!this.emailManager("validate",o))return;t({passwordConnecting:!0}),fetch(s.apiUrl+"/user/edit/password/email",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,language:n})}).then(function(e){throw 200==e.status&&(t({passwordStep:"verificationCode"}),r({password:d.noError})),new Error("ServerError")}).finally(function(){return t({passwordConnecting:!1})})},n.sendVerification=function(){var e=this.props,n=e.connecting,a=e.changeControl,t=e.changeErrors,r=document.getElementById("user-edit-password-verification").value,o=document.getElementById("user-edit-password-email").value;if(n||!this.verificationManager("validate",r))return;a({passwordConnecting:!0}),fetch(s.apiUrl+"/user/edit/password/verification",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,verification_code:r})}).then(function(e){if(200==e.status)return a({passwordStep:"password"}),t({password:d.noError});throw new Error("ServerError")}).catch(function(){t({password:{pl:"nieprawidłowy kod weryfikacyjny",en:"invalid verification code"}})}).finally(function(){return a({passwordConnecting:!1})})},n.sendPassword=function(){var e=this.props,n=e.connecting,a=e.changeControl,t=document.getElementById("user-edit-password").value,r=document.getElementById("user-edit-password-email").value,o=document.getElementById("user-edit-password-verification").value,i=(0,l.hashPassword)(t,r);if(n||!this.passwordManager("validate",t))return;a({passwordConnecting:!0}),fetch(s.apiUrl+"/user/edit/password",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,verification_code:o,password:i})}).then(function(e){if(200==e.status)return a({passwordStep:"success"}),changeErrors({password:d.noError}),void setTimeout(function(){a({passwordStage:"success"})},1e3);throw new Error("ServerError")}).catch(function(e){return console.dir(e)}).finally(function(){return a({passwordConnecting:!1})})};var s=a(10),l=a(241),d=a(242)},261:function(e,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.monitProvider=function(){switch(this.props.step){case null:return this.languageObjectHandler(t.emailAddress);case"verificationCode":return this.languageObjectHandler(t.verificationCode);case"password":return this.languageObjectHandler(t.password);case"success":return this.languageObjectHandler(t.success)}};var t=function(e){{if(e&&e.__esModule)return e;var n={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n.default=e,n}}(a(262))},262:function(e,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.success=n.password=n.verificationCode=n.emailAddress=void 0;var t,r=a(0),o=(t=r)&&t.__esModule?t:{default:t};n.emailAddress={pl:o.default.createElement("span",null,"Jeżeli chcesz zresetować hasło podaj adres email przypisany do tego konta i naciśnij 'Dalej'."),en:o.default.createElement("span",null,"If you wish to reset the password please provide the account email address and press `Next`.")},n.verificationCode={pl:o.default.createElement("span",null,"Kod weryfikacyjny został wysłany na podany adres email. Wklej go poniżej i naciśnij 'Dalej'."),en:o.default.createElement("span",null,"The verification code was sent to the provided email address. Paste it below and press 'Next'.")},n.password={pl:o.default.createElement("span",null,"Podaj nowe hasło."),en:o.default.createElement("span",null,"Provide new password.")},n.success={pl:o.default.createElement("span",null,"Twoje hasło zostało zmienione."),en:o.default.createElement("span",null,"Your password was changed.")}},263:function(e,n,a){var t=a(264);"string"==typeof t&&(t=[[e.i,t,""]]);var r={hmr:!0,transform:void 0};a(6)(t,r);t.locals&&(e.exports=t.locals)},264:function(e,n,a){(e.exports=a(5)(!1)).push([e.i,".container {\n  position: relative;\n  background: #FDFEFE;\n  border-radius: 3px;\n  padding: 25px; }\n\n.wide-container {\n  width: 1200px; }\n\n.medium-container {\n  width: 720px; }\n  @media only screen and (max-width: 769px) {\n    .medium-container {\n      width: auto; } }\n  @media only screen and (max-width: 480px) {\n    .medium-container {\n      padding: 15px; } }\n\n.narrow-container {\n  width: 456px; }\n  @media only screen and (max-width: 480px) {\n    .narrow-container {\n      padding: 15px;\n      width: 100%; } }\n\n.shadowed {\n  box-shadow: 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 3px 8px 3px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12); }\n\n#user-edit-account-password .monit {\n  text-align: justify;\n  line-height: 18px;\n  font-size: 14px;\n  margin-bottom: 25px; }\n\n#user-edit-account-password .form-input.button {\n  position: relative;\n  width: 50%;\n  margin-left: auto; }\n",""])}}]);